<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Xon Saroy - Khiva Restaurant</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500&display=swap');
    
    *, *::before, *::after { 
      box-sizing: border-box; 
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #1a1410 0%, #2c1810 50%, #1a1410 100%);
      color: #f4e4d4;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      position: relative;
    }
    
    body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 50%, rgba(184, 134, 11, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 50%, rgba(139, 69, 19, 0.1) 0%, transparent 50%),
        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="none"/><path d="M0,50 Q25,45 50,50 T100,50" stroke="rgba(184,134,11,0.05)" fill="none"/></svg>');
      background-size: 100% 100%, 100% 100%, 100px 100px;
      pointer-events: none;
      z-index: 0;
    }
    
    .header {
      background: linear-gradient(90deg, rgba(26,20,16,0.95) 0%, rgba(44,24,16,0.95) 50%, rgba(26,20,16,0.95) 100%);
      padding: 10px 20px;
      border-bottom: 2px solid #b8860b;
      position: relative;
      z-index: 100;
      box-shadow: 0 4px 20px rgba(184, 134, 11, 0.2);
    }
    
    .header::before,
    .header::after {
      content: '❦';
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      color: #b8860b;
      font-size: 20px;
      opacity: 0.6;
    }
    
    .header::before { left: 20px; }
    .header::after { right: 20px; }
    
    .header-content {
      max-width: 100%;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .logo h1 {
      font-family: 'Playfair Display', serif;
      font-size: 1.4rem;
      font-weight: 700;
      color: #f4e4d4;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
      letter-spacing: 0.1em;
    }
    
    .logo::before {
      content: '♔';
      font-size: 1.2rem;
      color: #b8860b;
    }
    
    .controls {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .control-btn {
      background: rgba(184, 134, 11, 0.1);
      color: #d4af37;
      border: 1px solid rgba(184, 134, 11, 0.3);
      width: 32px;
      height: 32px;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      font-size: 14px;
      position: relative;
    }
    
    .control-btn:hover {
      background: rgba(184, 134, 11, 0.2);
      color: #f4e4d4;
      border-color: #b8860b;
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(184, 134, 11, 0.2);
    }
    
    .control-btn.active {
      background: rgba(184, 134, 11, 0.3);
      color: #f4e4d4;
      border-color: #d4af37;
    }
    
    #zoomLevel {
      font-size: 12px;
      color: #d4af37;
      min-width: 45px;
      text-align: center;
      font-family: 'SF Mono', Monaco, monospace;
      font-weight: 500;
    }
    
    .main {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      padding: 12px;
      z-index: 10;
    }
    
    .flipbook-container {
      position: relative;
      box-shadow: 
        0 20px 60px rgba(0, 0, 0, 0.5),
        0 0 0 1px rgba(184, 134, 11, 0.3),
        inset 0 0 20px rgba(184, 134, 11, 0.1);
      border-radius: 4px;
      overflow: hidden;
      transition: transform 0.3s ease;
      background: #1a1410;
    }
    
    .flipbook {
      width: 100%;
      height: 100%;
      position: relative;
    }
    
    .page {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #fff;
      position: absolute;
      top: 0;
      left: 0;
    }
    
    .page img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    
    .nav-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(26, 20, 16, 0.9);
      color: #d4af37;
      border: 1px solid rgba(184, 134, 11, 0.3);
      width: 40px;
      height: 40px;
      border-radius: 4px;
      cursor: pointer;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      font-size: 16px;
    }
    
    .nav-btn:hover {
      background: rgba(184, 134, 11, 0.2);
      color: #f4e4d4;
      border-color: #b8860b;
      transform: translateY(-50%) scale(1.1);
      box-shadow: 0 6px 20px rgba(184, 134, 11, 0.3);
    }
    
    .nav-btn.left { left: 12px; }
    .nav-btn.right { right: 12px; }
    
    .footer {
      background: linear-gradient(90deg, rgba(26,20,16,0.95) 0%, rgba(44,24,16,0.95) 50%, rgba(26,20,16,0.95) 100%);
      padding: 10px 20px;
      border-top: 2px solid #b8860b;
      position: relative;
      z-index: 100;
      box-shadow: 0 -4px 20px rgba(184, 134, 11, 0.2);
    }
    
    .footer::before,
    .footer::after {
      content: '❦';
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      color: #b8860b;
      font-size: 16px;
      opacity: 0.6;
    }
    
    .footer::before { left: 20px; }
    .footer::after { right: 20px; }
    
    .footer-content {
      max-width: 100%;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      position: relative;
    }
    
    .page-indicator {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      color: #d4af37;
      font-family: 'Playfair Display', serif;
      font-weight: 500;
    }
    
    .page-indicator span.current {
      color: #f4e4d4;
      font-weight: 700;
    }
    
    .progress-container {
      display: flex;
      align-items: center;
      gap: 10px;
      flex: 1;
      max-width: 250px;
    }
    
    .progress-bar {
      flex: 1;
      height: 3px;
      background: rgba(184, 134, 11, 0.2);
      overflow: hidden;
      border-radius: 2px;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #b8860b, #d4af37);
      transition: width 0.4s ease;
      border-radius: 2px;
    }
    
    .thumbnails {
      position: fixed;
      bottom: 60px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 6px;
      padding: 8px;
      background: rgba(26, 20, 16, 0.95);
      border: 1px solid rgba(184, 134, 11, 0.3);
      border-radius: 4px;
      z-index: 50;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    }
    
    .thumbnails.visible {
      opacity: 1;
      pointer-events: all;
    }
    
    .thumbnail {
      width: 45px;
      height: 63px;
      border: 1px solid rgba(184, 134, 11, 0.3);
      cursor: pointer;
      transition: all 0.3s ease;
      opacity: 0.6;
      border-radius: 2px;
    }
    
    .thumbnail:hover {
      opacity: 0.8;
      border-color: #b8860b;
      transform: scale(1.05);
    }
    
    .thumbnail.active {
      opacity: 1;
      border-color: #d4af37;
      box-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
    }
    
    .thumbnail img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      border-radius: 1px;
    }
    
    .toggle-thumbnails {
      position: fixed;
      bottom: 15px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(26, 20, 16, 0.9);
      color: #d4af37;
      border: 1px solid rgba(184, 134, 11, 0.3);
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      font-weight: 500;
      transition: all 0.3s ease;
      z-index: 40;
      font-family: 'Playfair Display', serif;
    }
    
    .toggle-thumbnails:hover {
      color: #f4e4d4;
      border-color: #b8860b;
      background: rgba(184, 134, 11, 0.1);
      transform: translateX(-50%) translateY(-2px);
      box-shadow: 0 4px 12px rgba(184, 134, 11, 0.2);
    }
    
    .shortcut-hint {
      position: fixed;
      bottom: 15px;
      right: 15px;
      font-size: 10px;
      color: rgba(212, 175, 55, 0.4);
      font-family: 'SF Mono', Monaco, monospace;
      opacity: 0.6;
    }
    
    /* Palace-style icons */
    .icon-zoom-in::before { content: '✚'; }
    .icon-zoom-out::before { content: '✖'; }
    .icon-reset::before { content: '⟲'; }
    .icon-prev::before { content: '◀'; }
    .icon-next::before { content: '▶'; }
    .icon-grid::before { content: '▦'; }
    
    @media (max-width: 640px) {
      .header-content {
        padding: 0 10px;
      }
      
      .logo h1 {
        font-size: 1.1rem;
      }
      
      .control-btn {
        width: 28px;
        height: 28px;
        font-size: 12px;
      }
      
      .nav-btn {
        width: 36px;
        height: 36px;
        font-size: 14px;
      }
      
      .thumbnail {
        width: 36px;
        height: 50px;
      }
      
      .header::before,
      .header::after,
      .footer::before,
      .footer::after {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-content">
      <div class="logo">
        <h1>XON SAROY</h1>
      </div>
      
      <div class="controls">
        <button class="control-btn icon-zoom-out" id="zoomOut" title="Kichiklashtirish"></button>
        <span id="zoomLevel">100%</span>
        <button class="control-btn icon-zoom-in" id="zoomIn" title="Kattalashtirish"></button>
        <button class="control-btn icon-reset" id="resetZoom" title="Asl holat"></button>
        <button class="control-btn icon-grid" id="toggleThumbnails" title="Miniaturalar"></button>
      </div>
    </div>
  </header>

  <main class="main">
    <button class="nav-btn left icon-prev" id="prevBtn" title="Oldingi"></button>

    <div class="flipbook-container" id="flipbookContainer">
      <div class="flipbook" id="flipbook">
        <!-- Pages 1-22 -->
        <div class="page"><img src="1.jpg" alt="Sahifa 1" loading="lazy"/></div>
        <div class="page"><img src="2.jpg" alt="Sahifa 2" loading="lazy"/></div>
        <div class="page"><img src="3.jpg" alt="Sahifa 3" loading="lazy"/></div>
        <div class="page"><img src="4.jpg" alt="Sahifa 4" loading="lazy"/></div>
        <div class="page"><img src="5.jpg" alt="Sahifa 5" loading="lazy"/></div>
        <div class="page"><img src="6.jpg" alt="Sahifa 6" loading="lazy"/></div>
        <div class="page"><img src="7.jpg" alt="Sahifa 7" loading="lazy"/></div>
        <div class="page"><img src="8.jpg" alt="Sahifa 8" loading="lazy"/></div>
        <div class="page"><img src="9.jpg" alt="Sahifa 9" loading="lazy"/></div>
        <div class="page"><img src="10.jpg" alt="Sahifa 10" loading="lazy"/></div>
        <div class="page"><img src="11.jpg" alt="Sahifa 11" loading="lazy"/></div>
        <div class="page"><img src="12.jpg" alt="Sahifa 12" loading="lazy"/></div>
        <div class="page"><img src="13.jpg" alt="Sahifa 13" loading="lazy"/></div>
        <div class="page"><img src="14.jpg" alt="Sahifa 14" loading="lazy"/></div>
        <div class="page"><img src="15.jpg" alt="Sahifa 15" loading="lazy"/></div>
        <div class="page"><img src="16.jpg" alt="Sahifa 16" loading="lazy"/></div>
        <div class="page"><img src="17.jpg" alt="Sahifa 17" loading="lazy"/></div>
        <div class="page"><img src="18.jpg" alt="Sahifa 18" loading="lazy"/></div>
        <div class="page"><img src="19.jpg" alt="Sahifa 19" loading="lazy"/></div>
        <div class="page"><img src="20.jpg" alt="Sahifa 20" loading="lazy"/></div>
        <div class="page"><img src="21.jpg" alt="Sahifa 21" loading="lazy"/></div>
        <div class="page"><img src="22.jpg" alt="Sahifa 22" loading="lazy"/></div>
      </div>
    </div>

    <button class="nav-btn right icon-next" id="nextBtn" title="Keyingi"></button>
  </main>

  <div class="thumbnails" id="thumbnails">
    <!-- Thumbnails will be generated by JavaScript -->
  </div>

  <button class="toggle-thumbnails" id="thumbnailToggle">MINIATURALAR</button>

  <footer class="footer">
    <div class="footer-content">
      <div class="page-indicator">
        <span class="current" id="currentPage">1</span>
        <span>/</span>
        <span id="totalPages">22</span>
      </div>
      
      <div class="progress-container">
        <div class="progress-bar">
          <div class="progress-fill" id="progressBar" style="width: 0%"></div>
        </div>
      </div>
    </div>
  </footer>

  <div class="shortcut-hint">← → tugmalaridan foydalaning</div>

  <!-- PageFlip JS -->
  <script src="https://cdn.jsdelivr.net/npm/page-flip@2.0.7/dist/js/page-flip.browser.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const flipbookEl = document.getElementById('flipbook');
      const flipbookContainer = document.getElementById('flipbookContainer');
      const pages = Array.from(flipbookEl.children);
      const thumbnailsContainer = document.getElementById('thumbnails');
      const currentPageEl = document.getElementById('currentPage');
      const totalPagesEl = document.getElementById('totalPages');
      const thumbnailToggle = document.getElementById('thumbnailToggle');
      
      totalPagesEl.textContent = pages.length;
      
      // Create thumbnails
      pages.forEach((page, index) => {
        const thumbnail = document.createElement('div');
        thumbnail.className = 'thumbnail';
        thumbnail.dataset.page = index;
        
        const img = document.createElement('img');
        img.src = `${index + 1}.jpg`;
        img.alt = `Sahifa ${index + 1}`;
        img.loading = 'lazy';
        
        thumbnail.appendChild(img);
        thumbnailsContainer.appendChild(thumbnail);
        
        thumbnail.addEventListener('click', () => {
          pageFlip.flip(index);
          updateActiveThumbnail(index);
        });
      });
      
      // Initialize PageFlip with palace settings
      const pageFlip = new St.PageFlip(flipbookEl, {
        width: 360,
        height: 520,
        size: 'stretch',
        minWidth: 260,
        maxWidth: 520,
        minHeight: 360,
        maxHeight: 720,
        drawShadow: true,
        flippingTime: 500,
        usePortrait: true,
        showPageCorners: true,
        disableFlipByClick: false,
        useMouseEvents: true,
        swipeDistance: 25,
        mobileScrollSupport: true
      });
      
      pageFlip.loadFromHTML(pages);
      
      function updateActiveThumbnail(pageIndex) {
        document.querySelectorAll('.thumbnail').forEach((thumb, index) => {
          thumb.classList.toggle('active', index === pageIndex);
        });
      }
      
      pageFlip.on('flip', (e) => {
        const pageIndex = e.data;
        const percent = Math.round((pageIndex + 1) / pages.length * 100);
        
        document.getElementById('progressBar').style.width = percent + '%';
        currentPageEl.textContent = pageIndex + 1;
        updateActiveThumbnail(pageIndex);
      });
      
      // Navigation
      document.getElementById('prevBtn').addEventListener('click', () => pageFlip.flipPrev());
      document.getElementById('nextBtn').addEventListener('click', () => pageFlip.flipNext());
      
      // Zoom controls
      let zoom = 1;
      const updateZoom = () => {
        flipbookContainer.style.transform = `scale(${zoom})`;
        document.getElementById('zoomLevel').textContent = Math.round(zoom * 100) + '%';
      };
      
      document.getElementById('zoomIn').addEventListener('click', () => {
        if (zoom < 1.5) {
          zoom += 0.1;
          updateZoom();
        }
      });
      
      document.getElementById('zoomOut').addEventListener('click', () => {
        if (zoom > 0.7) {
          zoom -= 0.1;
          updateZoom();
        }
      });
      
      document.getElementById('resetZoom').addEventListener('click', () => {
        zoom = 1;
        updateZoom();
      });
      
      // Toggle thumbnails
      function toggleThumbnails() {
        thumbnailsContainer.classList.toggle('visible');
        thumbnailToggle.style.opacity = thumbnailsContainer.classList.contains('visible') ? '1' : '0.7';
      }
      
      document.getElementById('toggleThumbnails').addEventListener('click', toggleThumbnails);
      thumbnailToggle.addEventListener('click', toggleThumbnails);
      
      // Keyboard navigation
      document.addEventListener('keydown', (e) => {
        switch(e.key) {
          case 'ArrowLeft':
            pageFlip.flipPrev();
            break;
          case 'ArrowRight':
            pageFlip.flipNext();
            break;
          case '+':
          case '=':
            document.getElementById('zoomIn').click();
            break;
          case '-':
          case '_':
            document.getElementById('zoomOut').click();
            break;
          case '0':
            document.getElementById('resetZoom').click();
            break;
          case 't':
          case 'T':
            toggleThumbnails();
            break;
        }
      });
      
      // Initialize
      updateActiveThumbnail(0);
    });
  </script>
</body>
</html>
